<%- include("../partials/admin/header.ejs") %>
<div class="container d-flex justify-content-center align-items-center vh-100">
    <div class="form-container p-4 border rounded shadow bg-white">
        <h1 class="text-center text-orange mb-4">Add New Customer</h1>

        <form action="/admin/addCustomer" method="post" id="addCustomer">
            <div class="mb-3">
                <label for="name" class="form-label">Customer Name</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="Enter Customer Name" >
                <div class="error-msg" id="err-1"></div>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" id="email" name="email" class="form-control" placeholder="Enter Customer Email" >
                <div class="error-msg" id="err-2"></div>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" id="password" name="password" class="form-control" placeholder="Enter Password" >
                <div class="error-msg" id="err-3"></div>
            </div>

            <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" id="phone"  name="phone" class="form-control" placeholder="Enter Phone Number" >
                <div class="error-msg" id="err-4"></div>
            </div>

            <div class="d-grid">
                <input type="submit" value="ADD CUSTOMER" class="btn btn-orange btn-lg">
            </div>

            <% if (typeof message !== 'undefined') { %>
                <p class="text-danger text-center mt-3"><%= message %></p>
            <% } %>
        </form>
    </div>
</div>

<style>
    .text-orange {
        color: #ffa500;
    }

    .btn-orange {
        background-color: #ffa500;
        border: none;
        color: white;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }

    .btn-orange:hover {
        background-color: #e59400;
    }

    .form-control:focus {
        border-color: #ffa500;
        box-shadow: 0 0 5px rgba(255, 165, 0, 0.5);
        outline: none;
    }

    .form-container {
        width: 100%;
        max-width: 500px; /* Keep the form width moderate */
        margin-left: 10px; /* Ensure the form aligns correctly */
        margin-right: 10px; /* Ensure the form aligns correctly */
    }

    .container {
        min-height: 100vh; /* Full height to center vertically */
        margin-top: 0; /* Reset margin */
    }

    .vh-100 {
        height: 100vh; /* Ensures the container takes full height */
    }
    .error-msg{
        color: red;
    }
</style>
<script>
    const nameid = document.getElementById("name");
    const emailid = document.getElementById("email");
    const passwordid = document.getElementById("password");
    const phoneid = document.getElementById("phone");
    const err1 = document.getElementById("err-1");
    const err2 = document.getElementById("err-2");
    const err3 = document.getElementById("err-3");
    const err4 = document.getElementById("err-4");
    const addCustomer = document.getElementById("addCustomer");
    
    function nameValidation() {
        const nameVal = nameid.value.trim();
        const namePattern = /^[a-zA-Z\s]+$/; // Accept only alphabets and spaces
    
        if (nameVal === "") {
            err1.style.display = "block";
            err1.innerHTML = "Please Enter Name";
            return false;
        } else if (!namePattern.test(nameVal)) {
            err1.style.display = "block";
            err1.innerHTML = "Invalid Name. Name can only contain alphabets.";
            return false;
        } else {
            err1.style.display = "none";
            err1.innerHTML = "";
            return true;
        }
    }
    
    function emailValidation() {
        const emailVal = emailid.value.trim();
        const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    
        if (emailVal === "") {
            err2.style.display = "block";
            err2.innerHTML = "Please Enter Email";
            return false;
        } else if (!emailPattern.test(emailVal)) {
            err2.style.display = "block";
            err2.innerHTML = "Invalid Email";
            return false;
        } else {
            err2.style.display = "none";
            err2.innerHTML = "";
            return true;
        }
    }
    
    function passwordValidation() {
        const passVal = passwordid.value.trim();
        const passPattern = /^.{6,}$/; // Minimum 6 characters
    
        if (passVal === "") {
            err3.style.display = "block";
            err3.innerHTML = "Please Enter Password";
            return false;
        } else if (!passPattern.test(passVal)) {
            err3.style.display = "block";
            err3.innerHTML = "Password must be at least 6 characters";
            return false;
        } else {
            err3.style.display = "none";
            err3.innerHTML = "";
            return true;
        }
    }
    
    function phoneValidation() {
        const phnVal = phoneid.value.trim();
        const phnPattern = /^[0-9]{10}$/; // Accept only 10-digit numbers
    
        if (phnVal === "") {
            err4.style.display = "block";
            err4.innerHTML = "Please Enter Phone Number";
            return false;
        } else if (!phnPattern.test(phnVal)) {
            err4.style.display = "block";
            err4.innerHTML = "Invalid Phone Number. Must be 10 digits.";
            return false;
        } else {
            err4.style.display = "none";
            err4.innerHTML = "";
            return true;
        }
    }
    
    document.addEventListener("DOMContentLoaded", function () {
        addCustomer.addEventListener("submit", function (e) {
            const isNameValid = nameValidation();
            const isEmailValid = emailValidation();
            const isPasswordValid = passwordValidation();
            const isPhoneValid = phoneValidation();
    
            // Prevent form submission if any validation fails
            if (!isNameValid || !isEmailValid || !isPasswordValid || !isPhoneValid) {
                e.preventDefault();
            }
        });
    });
    
</script>
<%- include("../partials/admin/footer.ejs") %>
